开发流程：
crawler服务：
===================================CrawlerService=======================================
CrawlerServicesImpl:
	deduplicate
-----Search------------------------
	@Override (old search function)
	searchAvailability
		HotelAvailabilityService.searchAvailability
			HotelAvailabilityService.searchSupplierAvailability
				HotelAvailabilityService.doSupplierAvailability
	@Override (current use Search)
	doSearchAvailability
		//城市酒店搜索方法(单供应商)
		searchSupplierAvailability
			HotelAvailabilityService.searchSupplierAvailability
	@Override (current use Search)
	doQueryAvailability
		//ReWriter后，单酒店查询(多线程并发)。
		HotelAvailabilityService.querySupplierAvailability
			HotelAvailabilityService.doSupplierAvailability		 
----------验价-----------------------------------------------
	//组合了一次和二次验价（当前使用）
	@Override
	getAvailability
		HotelAvailabilityService.getSupplierAvailability
		HotelAvailabilityService.verifySupplierAvailability
	//提供同步验价接口availability/verify的访问
	@Override
	verifyAvailability
		getAvailability
	//提供同步单酒店调用availability/synchronous/query的访问
	@Override
	queryAvailability
	//一次验价
	@Override	
	getSupplierAvailability
		getSupplierAvailability
	//二次验价
	@Override
	verifySupplierAvailability
		verifySupplierAvailability
----------政策---------------------------
	//政策获取
	@Override
	getRoomPolicy
----------辅助方法---------------------------
	//获取有效的supplier
	getOnlineGdsSet
	@Override
	reload()
	//读取redis缓存中的数据availability/storage/read服务
	@Override
	readAvailability
	readProfile
	getSupplierRewriterKeys
==========================HotelAvailabilityService========================================

接口定义：
	searchAvailability
	getRoomPolicy
	getAvailability
	verifyAvailability
	verifySupplierAvailability
	searchSupplierAvailability
	getSupplierAvailability
	querySupplierAvailability
-----接口实现（一） ---------
crawler.service.impl.HotelAvailabilityXMLService
-------------搜索入口（旧）----------------
	searchAvailability(xml接口)
		doAvailability
			buildRequest(纯配置实现搜索请求)
			sendRequest(仅支持http请求)
			SupplierHotelAvailabilityBuilder.build
				@Override
				SupplierHotelAvailabilityXMLBuilder.build
					//need to Override
					parseStatus
					//need to Override
					parseHotelAvailabilities

				//主动缓存，目前不剪裁检索结果。涉及OTA，仅部分supplier实现了。
				HotelAvailabilityBuilder.buildAll
	
-------------搜索入口（新）----------------
	//城市酒店搜索方法(单供应商)
	searchSupplierAvailability
		doSupplierAvailability
			buildRequest(纯配置实现搜索请求)
			sendRequest(仅支持http请求)
			SupplierHotelAvailabilityBuilder.build
	(单酒店搜索入口)
	querySupplierAvailability
		doSupplierAvailability
			buildRequest(纯配置实现搜索请求)
			sendRequest(仅支持http请求)
			SupplierHotelAvailabilityBuilder.build
-----------验价（未区分一次二次验价）-------------
	//验价入口	
	getSupplierAvailability
		doSupplierAvailability
		pruneSupplierHotelAvailabilitiesByRoomType（FromOTA）
		pruneSupplierHotelAvailabilities
	(验价入口)
	getAvailability
		(验价接口转搜索接口实现)获取验价相关url与template
		doAvailability
---------搜索验价公用方法-------------------
	doSupplierAvailability
		buildRequest
		sendRequest
		SupplierHotelAvailabilityBuilder.build
------------政策接口----------------
	doSupplierPolicy
		buildRequest
		sendRequest
		SupplierHotelAvailabilityBuilder.build
	----仅restel使用的逻辑
	doSupplierMessage
		buildRequest
		sendRequest
		SupplierHotelAvailabilityBuilder.build



	
-----接口实现（二） ---------------------------------------------------------------------
crawler.supplier.base.Api
	(搜索入口)
	//城市酒店搜索方法(单供应商)
	searchSupplierAvailability
			--doSupplierAvailability
				  @Override
				--buildSearchAvailabilityRequest
				(新增)
					  @Override
					  --combineParams
					  @Override
					  --buildTemplateFile
				--gdsAvailability
					  @Override
					--doAvailability
				--parseSupplierSearchAvailabilityResponse(response, availabilities)
					  @Override
					--parseSupplierSearchAvailabilityResponse(response, request, shaList)
					(新增)
	(搜索入口)
	//单酒店搜索方法
	querySupplierAvailability
        request.setHotelCode(hotelCode);
		doSupplierAvailability
		filterSupplierHotelAvailabilities

	//OTA逻辑
	doGetSupplierAvailabilityFromOTA
		searchSupplierAvailabilityByHotel
		convert
		confirmPrice


---------------------------------------------------------------------
Override(验价入口)
	getAvailability
		//一次验价
		getSupplierAvailability
			1、有验价接口：
				（必须重写）
				doGetSupplierAvailability
					confirmPrice
				（必须重写）
				doConfirmPrice
			2、无验价接口：
			@Override(如果有验价接口，需要覆盖)
			--doGetSupplierAvailability
				--doSupplierAvailability
			pruneSupplierHotelAvailabilitiesByRoomType（FromOTA）
			pruneSupplierHotelAvailabilities
		//二次验价
		verifySupplierAvailability
		-------------验价-------------
		confirmPrice
			buildConfirmPriceRequest
			gdsConfirmPrice
				doConfirmPrice(NeedToOverride)
			parseSupplierConfirmPriceResponse
---------------------------------------------------------------------
政策入口
	@Override
	getRoomPolicy
		--doRoomPolicy
			--doSupplierPolicy
				buildSupplierPolicyRequest
				gdsPolicy
					doPolicy
				parseSupplierPolicyResponse	
	//仅travellanda使用了这个逻辑
	doRoomPolicyRetry

---------------------------------------------------------------------

	getRoomList
	setRoomList
	getRoomNum
	getInProfileLogList
	setInProfileLogList
	sameRoomRateIdList
	filterSupplierHotelAvailabilities
	
	--convert(主动缓存相关)
		--BeanConverter.toHotelAvailabilities(availabilities, mappers)

---------------------------------------------------------------------

	
	
	
	
	
	
	searchSupplierAvailabilityByHotel

	@Override
	querySupplierAvailability
		--doSupplierAvailability
		--filterSupplierHotelAvailabilities

	@Important
	doSupplierAvailability

	@important
	buildSearchAvailabilityRequest

	gdsAvailability
	
	@important
	doAvailability
	
	@important
	parseSupplierSearchAvailabilityResponse
	parseSupplierSearchAvailabilityResponse

	buildHotelAvailabilitiesList
	buildGetAvailabilitiesList
	
	

	doGetSupplierAvailability
		--doSupplierAvailability

	confirmPricePassed
	confirmPrice
	parseSupplierConfirmPriceResponse
	parseSupplierConfirmPriceResponse
	buildConfirmPriceRequest
	gdsConfirmPrice
	doConfirmPrice
	hotelRoomsCombined
	setHttpConfig
	setHttpConfig
	getWsdlLocation
	getWsdlLocation
	doRequest
	doRequest
	doRequest
	httpRequest
	httpRequest
	httpRequest
	getRoomKey
	getRoomKey
	getRoomKeyBase
	getRoomKeyPax
	getAllRoomIndex
	getRmIndexAllInOneList
	getRoomIndexByIndex
	getRoomIndexListByIndex
	getRmIndexListByPax
	getRmIndexListByPax
	getRmIndexList
	getRmIndexGreedList
	getRmIndex
	getRmIndexList
	toProfileLog
	toProfileLog
	verifyWithoutSearch
	doGetSupplierAvailabilityFromOTA
	getHotelAvailabilityRequestRooms
	canChange

一、全部接口都需要实现
	1、citySearch
		request
		response

	2、hotelSearch
		request
		response

	3、Verify
		request
		response

	4、Policy
		request
		response
		
二、合并部分接口
	1、Search
		request
		response

	2、Verify
		request
		response
		
	3、Policy
		request
		response